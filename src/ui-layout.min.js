!function(){"use strict";angular.module("ui.layout",[]).controller("uiLayoutCtrl",["$scope","$attrs","$element","$timeout","$window","LayoutContainer","Layout",function(b,c,d,e,f,g,h){function p(){var a=i.sizeProperties.flowProperty,c=parseInt(j.dividerSize),f=d[0][i.sizeProperties.offsetSize];if(null!==i.movingSplitbar){var g=i.containers.indexOf(i.movingSplitbar),h=g+2<i.containers.length?g+2:null;if(g>-1){var k=i.processSplitbar(i.containers[g]),n=k.beforeContainer,p=k.afterContainer;if(!n.collapsed&&!p.collapsed){var q=i.movingSplitbar[a]-m,r=i.movingSplitbar[a]-q;r=Math.min(f-c,r),angular.isNumber(n.beforeMinValue)&&r<n.beforeMinValue&&(r=n.beforeMinValue),angular.isNumber(n.beforeMaxValue)&&r>n.beforeMaxValue&&(r=n.beforeMaxValue),null!==p&&angular.isNumber(p.afterMinValue)&&r>p.afterMinValue-c&&(r=p.afterMinValue-c),null!==p&&angular.isNumber(p.afterMaxValue)&&r<p.afterMaxValue&&(r=p.afterMaxValue),n.size=r-n[a],n.uncollapsedSize=n.size;var s=p[a];p[a]=r+c,p[a]!=s&&(p.size=null!==h?s+p.size-(r+c):f-(r+c),p.uncollapsedSize=p.size),i.movingSplitbar[a]=r,o&&e.cancel(o),o=e(function(){b.$broadcast("ui.layout.resize",n,p),o=null},50)}}}l=null}function q(a){var b=a[0],c=document.documentElement||document.body,d=window.pageXOffset||c.scrollLeft,e=window.pageYOffset||c.scrollTop,f=b.getBoundingClientRect(),g=f.left+d,h=f.top+e;return{left:g,top:h}}function r(a){return"number"==typeof a||"string"==typeof a&&a.match(n)?a:null}var l,m,i=this,j=angular.extend({},b.$eval(c.uiLayout),b.$eval(c.options)),k=0,n=/\d+\s*(px|%)\s*$/i;h.addLayout(i),i.containers=[],i.movingSplitbar=null,i.bounds=d[0].getBoundingClientRect(),i.isUsingColumnFlow="column"===j.flow,i.sizeProperties=i.isUsingColumnFlow?{sizeProperty:"width",offsetSize:"offsetWidth",offsetPos:"left",flowProperty:"left",oppositeFlowProperty:"right",mouseProperty:"clientX",flowPropertyPosition:"x"}:{sizeProperty:"height",offsetSize:"offsetHeight",offsetPos:"top",flowProperty:"top",oppositeFlowProperty:"bottom",mouseProperty:"clientY",flowPropertyPosition:"y"},d.addClass("stretch").addClass("ui-layout-"+(j.flow||"row")),j.disableToggle&&d.addClass("no-toggle"),j.disableMobileToggle&&d.addClass("no-mobile-toggle"),j.sizes=j.sizes||[],j.maxSizes=j.maxSizes||[],j.minSizes=j.minSizes||[],j.dividerSize=void 0===j.dividerSize?10:j.dividerSize,j.collapsed=j.collapsed||[],i.opts=j,b.updateDisplay=function(){i.calculate()};var o;return i.mouseUpHandler=function(a){return null!==i.movingSplitbar&&(i.movingSplitbar=null),a},i.mouseMoveHandler=function(a){var b=a[i.sizeProperties.mouseProperty]||a.originalEvent&&a.originalEvent[i.sizeProperties.mouseProperty]||(f.jQuery?a.originalEvent?a.originalEvent.targetTouches[0][i.sizeProperties.mouseProperty]:0:a.targetTouches?a.targetTouches[0][i.sizeProperties.mouseProperty]:0);m=b-q(d)[i.sizeProperties.offsetPos],l&&window.cancelAnimationFrame(l),l=window.requestAnimationFrame(p)},i.processSplitbar=function(a){var b=i.containers.indexOf(a),c=function(a){var b=a[i.sizeProperties.flowProperty],c=a[i.sizeProperties.flowProperty]+a.size;a.beforeMinValue=angular.isNumber(a.minSize)?b+a.minSize:b,a.beforeMaxValue=angular.isNumber(a.maxSize)?b+a.maxSize:null,a.afterMinValue=angular.isNumber(a.minSize)?c-a.minSize:c,a.afterMaxValue=angular.isNumber(a.maxSize)?c-a.maxSize:null};if(b>-1){var d=b>0?i.containers[b-1]:null,e=b+1<=i.containers.length?i.containers[b+1]:null;return null!==d&&c(d),null!==e&&c(e),{beforeContainer:d,afterContainer:e}}return null},i.isPercent=function(a){return!!(a&&angular.isString(a)&&a.indexOf("%")>-1)},i.convertToPixels=function(a,b){return Math.floor(b*(parseInt(a)/100))},i.calculate=function(){var a,b,c=parseInt(j.dividerSize),e=d[0].getBoundingClientRect()[i.sizeProperties.sizeProperty],f=e-c*k,h=f,l=0,m=0;if(i.containers.length>0&&d.children().length>0){for(b=0;b<i.containers.length;b++)g.isSplitbar(i.containers[b])||(a=i.containers[b],j.sizes[b]=a.isCentral?"auto":a.collapsed?r(a.minSize)||"0px":r(a.uncollapsedSize)||"auto",j.minSizes[b]=r(a.minSize),j.maxSizes[b]=r(a.maxSize),"auto"!==j.sizes[b]&&(i.isPercent(j.sizes[b])?j.sizes[b]=i.convertToPixels(j.sizes[b],h):j.sizes[b]=parseInt(j.sizes[b])),null!==j.minSizes[b]&&(i.isPercent(j.minSizes[b])?j.minSizes[b]=i.convertToPixels(j.minSizes[b],h):j.minSizes[b]=parseInt(j.minSizes[b]),!a.collapsed&&j.sizes[b]<j.minSizes[b]&&(j.sizes[b]=j.minSizes[b])),null!==j.maxSizes[b]&&(i.isPercent(j.maxSizes[b])?j.maxSizes[b]=i.convertToPixels(j.maxSizes[b],h):j.maxSizes[b]=parseInt(j.maxSizes[b]),j.sizes[b]>j.maxSizes[b]&&(j.sizes[b]=j.maxSizes[b])),"auto"===j.sizes[b]?m++:f-=j.sizes[b]);var n=Math.floor(f/m),o=f-n*m;for(b=0;b<i.containers.length;b++){if(a=i.containers[b],a[i.sizeProperties.flowProperty]=l,a.maxSize=j.maxSizes[b],a.minSize=j.minSizes[b],g.isSplitbar(a))a.size=c;else{var p;"auto"===j.sizes[b]?(p=n,o>0&&b===i.containers.length-1&&(p+=o)):p=j.sizes[b],a.size=null!==p?p:n}l+=a.size}}},i.addContainer=function(a){var b=i.indexOfElement(a.element);return!angular.isDefined(b)||b<0||i.containers.length<b?void console.error("Invalid index to add container; i="+b+", len=",i.containers.length):(g.isSplitbar(a)&&k++,a.index=b,i.containers.splice(b,0,a),void i.calculate())},i.removeContainer=function(a){var b=i.containers.indexOf(a);if(b>=0){g.isSplitbar(a)?(i.containers[b-1].collapsed=!1,k--):i.containers.length>2&&(b==i.containers.length-1?i.containers[b-1].element.remove():i.containers[b+1].element.remove());var c=i.containers.indexOf(a);c>=0&&(i.containers.splice(c,1),i.opts.maxSizes.splice(c,1),i.opts.minSizes.splice(c,1),i.opts.sizes.splice(c,1)),i.calculate()}else console.error("removeContainer for container that did not exist!")},i.getContainers=function(){return i.containers},i.toggleContainer=function(a){var c,b=i.containers[a+1];b?c=b.element[0].children[0]:(b=i.containers[a-1],c=b.element[0].children[1]),e(function(){angular.element(c).triggerHandler("click")})},i.toggleBefore=function(a){var c=i.containers.indexOf(a)-1,d=i.containers[c];d.collapsed=!i.containers[c].collapsed;var e=i.containers[c+1],f=i.containers[c+2];return void 0===d.uncollapsedSize?d.uncollapsedSize=d.size:d.uncollapsedSize=parseInt(d.uncollapsedSize),b.$apply(function(){d.collapsed?(d.size=0,e&&(e[i.sizeProperties.flowProperty]-=d.uncollapsedSize),f&&(f[i.sizeProperties.flowProperty]-=d.uncollapsedSize,f.uncollapsedSize+=d.uncollapsedSize)):(d.size=d.uncollapsedSize,e&&(e[i.sizeProperties.flowProperty]+=d.uncollapsedSize),f&&(f[i.sizeProperties.flowProperty]+=d.uncollapsedSize,f.uncollapsedSize-=d.uncollapsedSize))}),b.$broadcast("ui.layout.toggle",d),h.toggled(),d.collapsed},i.toggleAfter=function(a){var k,c=i.containers.indexOf(a)+1,e=i.containers[c],f=i.containers[c-1],g=i.containers[c-2],j=c===i.containers.length-1,l=i.sizeProperties.flowProperty,m=i.sizeProperties.sizeProperty;return i.bounds=d[0].getBoundingClientRect(),e.collapsed=!i.containers[c].collapsed,void 0===e.uncollapsedSize?e.uncollapsedSize=e.size:e.uncollapsedSize=parseInt(e.uncollapsedSize),b.$apply(function(){e.collapsed?(e.size=0,k=j?i.bounds[m]-e[l]-e.uncollapsedSize:0,f&&(f[l]+=e.uncollapsedSize+k),g&&(g.size+=e.uncollapsedSize+k)):(e.size=e.uncollapsedSize,k=j?i.bounds[m]-e[l]-e.uncollapsedSize:0,f&&(f[l]-=e.uncollapsedSize+k),g&&(g.size-=e.uncollapsedSize+k))}),b.$broadcast("ui.layout.toggle",e),h.toggled(),e.collapsed},i.getPreviousSplitbarContainer=function(a){if(g.isSplitbar(a)){var b=i.containers.indexOf(a),c=b-2;return c>=0?i.containers[c]:null}return null},i.getNextSplitbarContainer=function(a){if(g.isSplitbar(a)){var b=i.containers.indexOf(a),c=b+2;return b>0&&c<i.containers.length?i.containers[c]:null}return null},i.hasSplitbarBefore=function(a){var b=i.containers.indexOf(a);return 1<=b&&g.isSplitbar(i.containers[b-1])},i.hasSplitbarAfter=function(a){var b=i.containers.indexOf(a);return b<i.containers.length-1&&g.isSplitbar(i.containers[b+1])},i.isLayoutElement=function(a){return a.hasAttribute("ui-layout-container")||a.hasAttribute("ui-splitbar")||"UI-LAYOUT-CONTAINER"===a.nodeName},i.indexOfElement=function(a){for(var b=a.parent(),c=b.children(),d=0,e=0;e<c.length;e++){var f=c[e];if(i.isLayoutElement(f)){if(a[0]==c[e])return d;d++}}return-1},i}]).directive("uiLayout",["$window",function(a){return{restrict:"AE",controller:"uiLayoutCtrl",link:function(b,c,d,e){function f(){b.$evalAsync(function(){e.calculate()})}b.$watch(function(){return c[0][e.sizeProperties.offsetSize]},function(){e.calculate()}),angular.element(a).bind("resize",f),b.$on("$destroy",function(){angular.element(a).unbind("resize",f)})}}}]).directive("uiSplitbar",["LayoutContainer",function(a){var b=angular.element(document.body.parentElement);return{restrict:"EAC",require:"^uiLayout",scope:{},link:function(c,d,e,f){function r(a){c.$apply(angular.bind(f,f.mouseMoveHandler,a))}function s(a){c.$apply(angular.bind(f,f.mouseUpHandler,a)),b.off("mousemove touchmove",r)}d.hasClass("stretch")||d.addClass("stretch"),d.hasClass("ui-splitbar")||d.addClass("ui-splitbar");var g=f.isUsingColumnFlow?"animate-column":"animate-row";d.addClass(g),c.splitbar=a.Splitbar(),c.splitbar.element=d;var h=angular.element(d.children()[0]),i=angular.element(d.children()[1]),j=angular.element(h.children()[0]),k=angular.element(i.children()[0]),l="ui-splitbar-icon-left",m="ui-splitbar-icon-right",n="ui-splitbar-icon-up",o="ui-splitbar-icon-down",p=f.isUsingColumnFlow?l:n,q=f.isUsingColumnFlow?m:o;j.addClass(p),k.addClass(q),h.on("click",function(){var a,b,d=f.toggleBefore(c.splitbar),e=f.getPreviousSplitbarContainer(c.splitbar);null!==e&&(a=angular.element(e.element.children()[0]),b=angular.element(e.element.children()[1])),f.isUsingColumnFlow?d?(i.css("display","none"),j.removeClass(l),j.addClass(m),null!==e&&(a.css("display","none"),b.css("display","none"))):(i.css("display","inline"),j.removeClass(m),j.addClass(l),null!==e&&(a.css("display","inline"),b.css("display","inline"))):d?(i.css("display","none"),j.removeClass(n),j.addClass(o),null!==e&&(a.css("display","none"),b.css("display","none"))):(i.css("display","inline"),j.removeClass(o),j.addClass(n),null!==e&&(a.css("display","inline"),b.css("display","inline"))),c.$evalAsync(function(){f.calculate()})}),i.on("click",function(){var a,b,d=f.toggleAfter(c.splitbar),e=f.getNextSplitbarContainer(c.splitbar);null!==e&&(a=angular.element(e.element.children()[0]),b=angular.element(e.element.children()[1])),f.isUsingColumnFlow?d?(h.css("display","none"),k.removeClass(m),k.addClass(l),null!==e&&(a.css("display","none"),b.css("display","none"))):(h.css("display","inline"),k.removeClass(l),k.addClass(m),null!==e&&(a.css("display","inline"),b.css("display","inline"))):d?(h.css("display","none"),k.removeClass(o),k.addClass(n),null!==e&&(a.css("display","none"),b.css("display","none"))):(h.css("display","inline"),k.removeClass(n),k.addClass(o),null!==e&&(a.css("display","inline"),b.css("display","inline"))),c.$evalAsync(function(){f.calculate()})}),d.on("mousedown touchstart",function(a){if(0===a.button||"touchstart"===a.type)return f.movingSplitbar=c.splitbar,f.processSplitbar(c.splitbar),a.preventDefault(),a.stopPropagation(),b.on("mousemove touchmove",r),!1}),b.on("mouseup touchend",s),c.$watch("splitbar.size",function(a){d.css(f.sizeProperties.sizeProperty,a+"px")}),c.$watch("splitbar."+f.sizeProperties.flowProperty,function(a){d.css(f.sizeProperties.flowProperty,a+"px")}),f.addContainer(c.splitbar),d.on("$destroy",function(){f.removeContainer(c.splitbar),b.off("mouseup touchend",s),b.off("mousemove touchmove",r),c.$evalAsync()})}}}]).directive("uiLayoutContainer",["LayoutContainer","$compile","$timeout","Layout",function(a,b,c,d){return{restrict:"AE",require:"^uiLayout",scope:{collapsed:"=",resizable:"=",size:"@",minSize:"@",maxSize:"@"},compile:function(){return{pre:function(b,c,e,f){b.container=a.Container(),b.container.element=c,b.container.id=c.attr("id")||null,b.container.layoutId=f.id,b.container.isCentral="central"===e.uiLayoutContainer,b.collapsed===!0&&(b.collapsed=!1,d.addCollapsed(b.container)),angular.isDefined(b.resizable)&&(b.container.resizable=b.resizable),b.container.size=b.size,b.container.uncollapsedSize=b.size,b.container.minSize=b.minSize,b.container.maxSize=b.maxSize,f.addContainer(b.container),c.on("$destroy",function(){f.removeContainer(b.container),b.$evalAsync()})},post:function(a,c,d,e){c.hasClass("stretch")||c.addClass("stretch"),c.hasClass("ui-layout-container")||c.addClass("ui-layout-container");var f=e.isUsingColumnFlow?"animate-column":"animate-row";c.addClass(f),a.$watch("collapsed",function(b,c){angular.isDefined(c)&&b!==c&&e.toggleContainer(a.container.index)}),a.$watch("container.size",function(a){c.css(e.sizeProperties.sizeProperty,a+"px"),0===a?c.addClass("ui-layout-hidden"):c.removeClass("ui-layout-hidden")}),a.$watch("container."+e.sizeProperties.flowProperty,function(a){c.css(e.sizeProperties.flowProperty,a+"px")});var g=c.parent(),h=g.children(),i=e.indexOfElement(c),j=angular.element('<div ui-splitbar><a><span class="ui-splitbar-icon"></span></a><a><span class="ui-splitbar-icon"></span></a></div>');0<i&&!e.hasSplitbarBefore(a.container)?(angular.element(h[i-1]).after(j),b(j)(a)):i<h.length-1&&(c.after(j),b(j)(a))}}}}}]).directive("uiLayoutLoaded",["$timeout","Layout",function(a,b){return{require:"^uiLayout",restrict:"A",priority:-100,link:function(a,c,d){d.uiLayoutLoaded?a.$broadcast("ui.layout.loaded",d.uiLayoutLoaded):b.toggle().then(function(){a.$broadcast("ui.layout.loaded",null)})}}}]).factory("Layout",["$q","$timeout",function(a,b){function g(a){try{c[a.layoutId].toggleContainer(a.index)}catch(b){throw b.message="Could not toggle container ["+a.layoutId+"/"+a.index+"]: "+b.message,b}}var c=[],d=[],e=0,f=null;return{addLayout:function(a){a.id=c.length,c.push(a)},addCollapsed:function(a){d.push(a)},hasCollapsed:function(){return d.length>0},toggled:function(){if(0===e){if(!f)return!1;f.reject()}e--,0===e&&f.resolve()},toggle:function(){f=a.defer(),e=d.length,0===e&&b(function(){f.resolve()}),d.reverse();for(var c;c=d.pop();)g(c);return f.promise}}}]).factory("LayoutContainer",function(){function a(){this.id=null,this.layoutId=null,this.isCentral=!1,this.size="auto",this.uncollapsedSize=null,this.maxSize=null,this.minSize=null,this.resizable=!0,this.element=null,this.collapsed=!1}function b(){this.size=10,this.left=0,this.top=0,this.element=null}return{Container:function(b){return new a(b)},Splitbar:function(){return new b},isSplitbar:function(a){return a instanceof b}}})}();